# Отчет по лабораторной работе №21 по курсу "Фундаментальная информатика"

___Студент группы:___ М80-108Б-22 Сибирцев Роман Денисович \
___Контакты e-mail:___ sibirtsevr1@gmail.com \
___Работа выполнена:___ «12» апреля 2023 г. \
___Преподаватель:___ асп. каф. 806 Сахарин Никита Александрович \
___Входной контроль знаний с оценкой:___  \
___Отчет сдан___ «13» апреля 2023 г., ___итоговая оценка:___ 

Подпись преподавателя: ________________ 

## 1. Тема

__Программирование на интерпритируемых командных языках__

## 2. Цель работы

Составить программу выполнения заданных действий над файлами на одном из интерпритируемых языков _ОС UNIX (Shell, Cshell, Bach, ...)_

## 3. Задание

Рекурсивный обход указанного каталога и перекодировка всех _текстовых_ файлов в нем и в подкаталогах

## 4. Оборудование

___Прицессор___: AMD Ryzen 5 3600 (12) @ 3.600GHz \
___ОП___: 15944MiB \
___HDD___: 1TB

## 5. Программное обеспечение

___Операционная система семейства___ UNIX, ___наименование___ Arch Linux, ___версия___  6.2.2-arch1-1
___Интерпритатор команд___ bash, ___версия___ 5.1.16
___Редактор текстов___ nano

## 6. Идея, метод, алгоритм решения

1. Провести обработку введенных аргументов. По стандарту кодировка стоит _ASCII_ , директория ./

2. Перекодировать все _текстовые_ файлы в директории

3. Если введен один аргумент "?", то вывести подсказки

## 7. Сценарий выполнения работы

```bash
#!/usr/bin/env bash

if [ "$1" = "?" ]
   then
      echo "this program changes the encodings of all files with the .txt extension"
      echo "./script.sh [encoding] [path="./"]"
      exit 0
fi

t=$1
path=$2

if [ -z "$path" ]
   then
      path="./"
fi

if [ -z "$t" ]
   then
      t="ASCII"
fi

pr=$(iconv -l) ;
array=($(echo $pr | tr "//" "\n")) 

while [[ ! "${array[@]}" =~ "${t}" ]] 
   do 
      if [ "${t}" = "iconv -l" ]
         then
            iconv -l
      fi
      echo "Please, selec a correct encoding (the full list of encodings can be found here iconv -l)"
      read t
done

for files in `find $path -type f -name "*.txt"`
do
   code=`uchardet $files` 
   iconv -f ${code} -t $t -o $files $files

done
echo "Program shutdown!!!"
```

## 8. Распечатка протокола

```bash
[roman@archlinux lab21]$ file t1.txt 
t1.txt: ASCII text
[roman@archlinux lab21]$ ./script.sh UTF-32
Program shutdown!!!
[roman@archlinux lab21]$ file t1.txt 
t1.txt: Unicode text, UTF-32, little-endian
```

## 9. Дневник отладки должен содержать дату и время сеансов отладки и основные события (ошибки в сценарии и программе, нестандартные ситуации) и краткие комментарии к ним. В дневнике отладки приводятся сведения об использовании других ЭВМ, существенном участии преподавателя и других лиц в написании и отладке программы.

| № |  Лаб. или дом. | Дата | Время | Событие | Действие по исправлению | Примечание |
| ------ | ------ | ------ | ------ | ------ | ------ | ------ |
| 1 | дом. | 09.03.23 | 16:00 | Выполнение лабораторной работы | - | - |

## 10. Замечания автора по существу работы


## 11. Выводы

Подпись студента _________________